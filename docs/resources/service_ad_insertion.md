---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "bpkio_service_ad_insertion Resource - bpkio"
subcategory: ""
description: |-
  Manages Ad Insertion service creation (see https://developers.broadpeak.io/reference/adinsertioncontroller_create_v1).
---

# bpkio_service_ad_insertion (Resource)

Manages Ad Insertion service creation (see https://developers.broadpeak.io/reference/adinsertioncontroller_create_v1).

## Example Usage

```terraform
terraform {
  required_providers {
    bpkio = {
      source = "bashou/bpkio"
    }
  }
}

provider "bpkio" {
}


resource "bpkio_source_adserver" "this" {
  name        = "foobar-test-tf-adserver"
  description = "test"
  url         = "https://ad.server/endpoint"

  //TODO: Handle case when query_parameters is empty
  query_parameters = []
}

resource "bpkio_source_live" "this" {
  name        = "foobar-test-tf-liveorigin"
  description = "test"
  url         = "https://live.stream/master.m3u8"

  //TODO: Find way to handle when origin is empty
  origin = {}
}

resource "bpkio_source_slate" "this" {
  name        = "foobar-test-tf-slate"
  description = "test slate"
  url         = "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4"
}

data "bpkio_transcoding_profile" "this" {
  id = 4694
}

resource "bpkio_service_ad_insertion" "this" {
  name = "foobar-test-tf"

  live_ad_preroll = {
    ad_server = {
      id = bpkio_source_adserver.this.id
    }
    max_duration = 10
  }
  server_side_ad_tracking = {}

  source = {
    id = bpkio_source_live.this.id
  }

  live_ad_replacement = {
    ad_server = {
      id = bpkio_source_adserver.this.id
    }

    gap_filler = {
      id = bpkio_source_slate.this.id
    }

    spot_aware = {}
  }

  transcoding_profile = {
    id = data.bpkio_transcoding_profile.this.id
  }
}


resource "bpkio_service_ad_insertion" "this_no_preroll" {
  name = "foobar-test-tf-no-preroll-bis"

  source = {
    id = bpkio_source_live.this.id
  }

  server_side_ad_tracking = {}

  live_ad_replacement = {
    ad_server = {
      id = bpkio_source_adserver.this.id
    }

    gap_filler = {
      id = bpkio_source_slate.this.id
    }

    spot_aware = {}
  }

  transcoding_profile = {
    id = data.bpkio_transcoding_profile.this.id
  }
}

# ID 53826
resource "bpkio_service_ad_insertion" "test_free" {
  name = "[TEST TERRAFORM] BFM2 - Production - FAI FREE - FR - back(eu-west-3)"

  advanced_options = {
    authorization_header = {
      name  = "X-BPKIO-TOKEN"
      value = "3826aad4e408cb7c3918ce63620d3b56"
    }
  }

  source = {
    id = 120450
  }

  server_side_ad_tracking = {}

  live_ad_replacement = {
    ad_server = {
      id = 125334
    }

    gap_filler = {
      id = 120491
    }

    spot_aware = {
      mode = "disabled"
    }
  }

  transcoding_profile = {
    id = 5007
  }

  tags = [
    "production",
    "bfm2",
    "fai",
    "free",
    "video",
  ]
}


data "bpkio_service_ad_insertion" "this" {
  id = bpkio_service_ad_insertion.this.id
}
output "service_ad_insertion_id" {
  value = bpkio_service_ad_insertion.this.id
}


data "bpkio_service_ad_insertion" "this_no_preroll" {
  id = bpkio_service_ad_insertion.this_no_preroll.id
}
output "service_adinsertion_no_preroll_id" {
  value = bpkio_service_ad_insertion.this_no_preroll.id
}


data "bpkio_service_ad_insertion" "test_free" {
  id = bpkio_service_ad_insertion.test_free.id
}
output "service_adinsertion_test_free_source" {
  value = bpkio_service_ad_insertion.test_free.source
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the ad insertion service. This is a human-readable name for the service.

### Optional

- `advanced_options` (Attributes) (see [below for nested schema](#nestedatt--advanced_options))
- `enable_ad_transcoding` (Boolean)
- `live_ad_preroll` (Attributes) (see [below for nested schema](#nestedatt--live_ad_preroll))
- `live_ad_replacement` (Attributes) Live ad replacement configuration. This is the configuration for live ad replacement. (see [below for nested schema](#nestedatt--live_ad_replacement))
- `server_side_ad_tracking` (Attributes) (see [below for nested schema](#nestedatt--server_side_ad_tracking))
- `source` (Attributes) (see [below for nested schema](#nestedatt--source))
- `tags` (List of String) Tags for the ad insertion service. This is a list of tags associated with the service.
- `transcoding_profile` (Attributes) (see [below for nested schema](#nestedatt--transcoding_profile))
- `update_date` (String) Update date of the ad insertion service. This indicates when the service was last updated.

### Read-Only

- `creation_date` (String) Creation date of the ad insertion service. This indicates when the service was created.
- `id` (Number) ID of the ad insertion service. This is a unique identifier for the service.
- `state` (String) State of the ad insertion service. This indicates the current state of the service. Possible values are 'enabled', 'paused', or 'bypassed'.
- `type` (String) Type of the ad insertion service. This indicates the type of service being created.
- `url` (String) URL of the ad insertion service. This is the endpoint where the service can be accessed.

<a id="nestedatt--advanced_options"></a>
### Nested Schema for `advanced_options`

Optional:

- `authorization_header` (Attributes, Sensitive) (see [below for nested schema](#nestedatt--advanced_options--authorization_header))

<a id="nestedatt--advanced_options--authorization_header"></a>
### Nested Schema for `advanced_options.authorization_header`

Optional:

- `name` (String)
- `value` (String)



<a id="nestedatt--live_ad_preroll"></a>
### Nested Schema for `live_ad_preroll`

Optional:

- `ad_server` (Attributes) Ad server configuration. This is the ad server used for ad pre-roll. (see [below for nested schema](#nestedatt--live_ad_preroll--ad_server))
- `max_duration` (Number) Pre-roll maximum duration (in seconds)
- `offset` (Number) Pre-roll relative start time (in seconds)

<a id="nestedatt--live_ad_preroll--ad_server"></a>
### Nested Schema for `live_ad_preroll.ad_server`

Required:

- `id` (Number) ID of the ad server. This is a unique identifier for the ad server.

Read-Only:

- `name` (String) Name of the ad server. This is a human-readable name for the ad server.
- `type` (String) Type of the ad server. This indicates the type of ad server being used.
- `url` (String) URL of the ad server. This is the endpoint where the ad server can be accessed.



<a id="nestedatt--live_ad_replacement"></a>
### Nested Schema for `live_ad_replacement`

Optional:

- `ad_server` (Attributes) Ad server configuration. This is the ad server used for ad replacement. (see [below for nested schema](#nestedatt--live_ad_replacement--ad_server))
- `gap_filler` (Attributes) Gap filler configuration. This is the gap filler / slate used for ad replacement. (see [below for nested schema](#nestedatt--live_ad_replacement--gap_filler))
- `spot_aware` (Attributes) (see [below for nested schema](#nestedatt--live_ad_replacement--spot_aware))

<a id="nestedatt--live_ad_replacement--ad_server"></a>
### Nested Schema for `live_ad_replacement.ad_server`

Required:

- `id` (Number) ID of the ad server. This is a unique identifier for the ad server.

Read-Only:

- `name` (String) Name of the ad server. This is a human-readable name for the ad server.
- `type` (String) Type of the ad server. This indicates the type of ad server being used.
- `url` (String) URL of the ad server. This is the endpoint where the ad server can be accessed.


<a id="nestedatt--live_ad_replacement--gap_filler"></a>
### Nested Schema for `live_ad_replacement.gap_filler`

Required:

- `id` (Number) ID of the gap filler. This is a unique identifier for the gap filler.

Read-Only:

- `name` (String) Name of the gap filler. This is a human-readable name for the gap filler.
- `type` (String) Type of the gap filler. This indicates the type of gap filler being used.
- `url` (String) URL of the gap filler. This is the endpoint where the gap filler can be accessed.


<a id="nestedatt--live_ad_replacement--spot_aware"></a>
### Nested Schema for `live_ad_replacement.spot_aware`

Optional:

- `mode` (String) Mode of the spot aware. This indicates the mode of the spot aware feature. (valid values are 'french_addressable_tv', 'spot_to_live', or 'disabled'. Default: `disabled`).



<a id="nestedatt--server_side_ad_tracking"></a>
### Nested Schema for `server_side_ad_tracking`

Optional:

- `check_ad_media_segment_availability` (Boolean)
- `enable` (Boolean)


<a id="nestedatt--source"></a>
### Nested Schema for `source`

Required:

- `id` (Number)

Read-Only:

- `description` (String)
- `format` (String)
- `multi_period` (Boolean)
- `name` (String)
- `type` (String)
- `url` (String)


<a id="nestedatt--transcoding_profile"></a>
### Nested Schema for `transcoding_profile`

Required:

- `id` (Number)

Optional:

- `content` (String)
- `internal_id` (String)
- `name` (String)

## Import

Import is supported using the following syntax:

```shell
# Ad insertion Service can be imported by specifying the numeric identifier.
terraform import bpkio_service_ad_insertion.example 123
```
